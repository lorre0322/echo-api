<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0,user-scalable=0"><link rel="shortcut icon" href="/favicon.svg" type="image/svg+xml"><link rel="stylesheet" href="/style.css"><script src="/main.js"></script><title>Moment list | Echo Api</title><style>#list{ width: 100%; overflow: auto; padding: 0} .cut{ padding-inline: 5px} #list div{ text-align: left; white-space: nowrap; margin: 10px 0} #list span{ padding: 0 10px; display: inline-block; overflow: hidden; max-width: 300px; white-space: nowrap; vertical-align: middle; text-overflow: ellipsis} #list input{ vertical-align: middle; max-width: 100px} </style></head><body><div class="wrap"><h3>Moment list</h3><div class="ctrl" style="text-align: right;"><button id="prev">prev</button><span class="cut"><span id="nowpage">1</span><span class="cut">/</span><span id="maxpage">1</span></span><button id="next">next</button></div><div id="list"></div></div><div class="me"><a href="/login.html">Login</a><a href="/moment.html">Moment</a><a href="/list-moment.html">MomentList</a><a href="/upload.html">Upload</a></div><div id="msg"></div><script>var page=1, maxpage=1; const delMoment=async e=>{ if (window.confirm("你是否删除：" + e + " ? ")){ const t=await _req.del(`/moment/${e}`,{ token: localStorage.getItem("e-token") || ""}); console.log(t); t.ok ? (msg.sc("Delete success ! "), getlist()) : msg.er(t.reason || "Delete failed .")}}, getlist=async ()=>{ const e=await _req.get(`/moment/list/${page}/8`); maxpage=e.maxpage, $("nowpage").innerText=page, $("maxpage").innerText=maxpage, $("list").innerHTML="", e.data.forEach((e=>{ const t=document.createElement("div"), a=document.createElement("input"), n=document.createElement("span"); a.value=e.id, n.innerText=e.body, a.onclick=()=>{ a.select(), document.execCommand("copy"), a.blur()}, n.onclick=()=>{ delMoment(e.id)}, t.appendChild(a), t.appendChild(n), $("list").appendChild(t)}))}; getlist(), $("prev").onclick=()=>{ page >1 && page--, getlist()}, $("next").onclick=()=>{ page < maxpage && page++, getlist()}; </script></body></html>